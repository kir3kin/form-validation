(this.webpackJsonpform_validation=this.webpackJsonpform_validation||[]).push([[0],{25:function(e,t,n){},27:function(e,t,n){},28:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n(5),r=n(7),s=n(2),c=n(9),o=n.n(c),u=n(13);var l=Object(r.b)("form/sendFormData",function(){var e=Object(u.a)(o.a.mark((function e(t,n){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){return setTimeout((function(){return e({data:"You are loged in"})}),2e3)}));case 2:return a=e.sent,n.dispatch(d()),e.abrupt("return",{data:a.data,emptyStoreInputs:t});case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),d=Object(r.b)("form/hideLogStatus",Object(u.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){return setTimeout((function(){return e("")}),2e3)}));case 2:case"end":return e.stop()}}),e)})))),m=Object(r.c)({name:"form",initialState:{inputs:{},loading:!1,formDisable:!1,logIn:{msg:"",status:"not logged"}},reducers:{changeInput:function(e,t){e.inputs=Object(s.a)(Object(s.a)({},e.inputs),t.payload)}},extraReducers:function(e){e.addCase(l.pending,(function(e){e.loading=!0,e.formDisable=!0})).addCase(l.fulfilled,(function(e,t){e.loading=!1,e.formDisable=!1,e.inputs=Object(s.a)(Object(s.a)({},e.inputs),t.payload.emptyStoreInputs),e.logIn={msg:t.payload.data,status:"logged"}})).addCase(d.fulfilled,(function(e){e.logIn.status="not logged"}))}}),b=m.actions.changeInput,j=function(e){return{inputs:e.form.inputs,loading:e.form.loading,formDisable:e.form.formDisable,logIn:e.form.logIn}},f=m.reducer,p=Object(r.a)({reducer:{form:f}}),O=n(8),h=n(6),v=O.c,g=(n(25),n(1)),x=function(e){var t=e.text;return Object(g.jsx)("div",{className:"item__alert note",children:t})},_=n(29),w=function(e){var t=e.id,n=e.name,a=e.type,i=e.value,r=e.label,s=e.inputHandler,c=v(j),o=c.formDisable,u=c.inputs,l=!1,d=["item__label"],m=["item__input"],b={id:t||n,label:r||"User ".concat(a),value:u[n]?u[n].value:i,isValid:!!u[n]&&u[n].isValid,isChecked:!!u[n]&&u[n].isChecked};b.value.trim()&&d.push("item__label--active");var f=b.isChecked?b.isValid?"success":"warning":"";return m.push("item__input--".concat(f)),b.isChecked&&!b.isValid&&(l=!0),Object(g.jsxs)("div",{className:"form__item item",children:[Object(g.jsx)("input",{id:b.id,name:n,type:a,value:b.value,className:m.join(" "),onChange:function(e){return s(e)},disabled:o}),Object(g.jsx)("label",{htmlFor:b.id,className:d.join(" "),children:b.label}),Object(g.jsx)(_.a,{in:l,timeout:800,classNames:"alert",mountOnEnter:!0,unmountOnExit:!0,children:Object(g.jsx)(x,{text:"Please, enter correct ".concat(b.label)})})]})},y=(n(27),function(){return Object(g.jsx)("div",{className:"form__loader",children:Object(g.jsxs)("div",{className:"lds-ring",children:[Object(g.jsx)("div",{}),Object(g.jsx)("div",{}),Object(g.jsx)("div",{}),Object(g.jsx)("div",{})]})})}),N=function(){var e=Object(O.b)(),t=v(j),n=t.formDisable,i=t.loading,r=t.logIn,c=t.inputs,o=function(t,n,i){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",s=Object(h.a)({},t,{type:n,value:r,pattern:i?i.toString():"",isValid:!1,isChecked:!1});return Object(a.useEffect)((function(){e(b(s))}),[]),{name:t,type:n,value:r,inputHandler:d}},u=function(e){var t=e.pattern?new RegExp(e.pattern):{email:/^\w+@\w+(\.[a-z]+)+$/i,password:/^[\w!?@()&$-]{8,20}$/,tel:/^\d{3}-?\d{3}-?\d{3}$/}[e.type];e.isValid=t.test(e.value),e.isChecked=!0},d=function(t){var n=t.target.value,a=t.target.type,i=t.target.name,r=Object(h.a)({},i,{type:a,value:n,pattern:c[i].pattern});u(r[i]),e(b(r))};return Object(g.jsx)("form",{className:"form",onSubmit:function(t){return function(t){t.preventDefault();var n=[],a=[];if(Object.keys(c).map((function(e){var t={name:e,content:Object(s.a)({},c[e])};return c[e].isChecked&&c[e].isValid?a.push(t):n.push(t),e})),n.length)n.map((function(t){return u(t.content),e(b(Object(h.a)({},t.name,t.content))),t}));else{var i={};a.map((function(e){return e.content=Object(s.a)(Object(s.a)({},e.content),{value:"",isChecked:!1,isValid:!1}),i=Object(s.a)(Object(s.a)({},i),Object(h.a)({},e.name,e.content)),e})),e(l(i))}}(t)},children:Object(g.jsxs)("div",{className:"form__wrapper",children:[Object(g.jsx)(_.a,{in:"logged"===r.status,timeout:800,classNames:"alert",mountOnEnter:!0,unmountOnExit:!0,children:Object(g.jsx)("div",{className:"form__info",children:r.msg})}),Object(g.jsx)("h2",{className:"form__header",children:"Log in"}),Object(g.jsxs)("div",{className:"form__body",children:[Object(g.jsx)(w,Object(s.a)({id:"user-email",label:"email"},o("user_email","email"))),Object(g.jsx)(w,Object(s.a)({id:"user-phone",label:"phone number"},o("user_phone","tel"))),Object(g.jsx)(w,Object(s.a)({id:"user-password",label:"password"},o("user_password","password","^[\\w!?@()&$-]{10,20}$"))),Object(g.jsx)(_.a,{in:i,timeout:800,classNames:"alert",mountOnEnter:!0,unmountOnExit:!0,children:Object(g.jsx)(y,{})}),Object(g.jsx)("button",{disabled:n,type:"submit",className:"form__button",children:"Send"})]})]})})},k=function(){return Object(g.jsx)(N,{})};Object(i.render)(Object(g.jsx)(O.a,{store:p,children:Object(g.jsx)(k,{})}),document.getElementById("root"))}},[[28,1,2]]]);
//# sourceMappingURL=main.98fddd58.chunk.js.map